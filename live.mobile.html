<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>Cuadrantes de turnos · Móvil</title>

  <link rel="stylesheet" href="styles.css?v=APP">
  <link rel="stylesheet" href="styles.mobile.css?v=APP">

  <style>
    /* Barra superior */
    .appbar{display:flex;align-items:center;gap:.75rem;background:#161d27;color:#fff;padding:.8rem 1rem}
    .appbar .title{font:600 1.05rem/1.1 Montserrat,system-ui,Segoe UI,Arial}
    .appbar .subtitle{opacity:.8;font:500 .82rem/1.2 Montserrat,system-ui,Arial}

    .toolbar{margin-left:auto;display:flex;gap:.5rem}
    .btn{background:#243142;color:#fff;border:0;border-radius:.8rem;padding:.55rem .8rem;font:600 .9rem/1 Montserrat,system-ui;cursor:pointer}
    .btn:active{scale:.98}

    .container{padding:10px 12px 80px;background:#f4f6fa;min-height:100vh}

    /* ---------- Modal filtros (estilo compacto móvil) ---------- */
    .modal-mask{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;place-items:center;z-index:9999}
    .modal{width:min(980px,calc(100vw - 20px));background:#fff;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.25);padding:14px;border:2px solid #222}
    .modal h3{margin:0 0 .6rem 0;font:700 1.25rem/1.1 Montserrat,system-ui}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    @media (max-width:720px){.grid{grid-template-columns:1fr}}
    .field{display:flex;flex-direction:column;gap:6px;background:#242c36;border-radius:12px;padding:12px}
    .field label{color:#fff;font:600 .9rem/1.1 Montserrat,system-ui}
    .field small{color:#b6bfca}
    .control{position:relative}
    .control select,.control input[type=date]{
      width:100%;appearance:none;background:#fff;border:1px solid #cfd6e4;border-radius:9px;
      padding:12px 40px 12px 12px;font:600 .98rem/1.2 Montserrat,system-ui;color:#111
    }
    .ico{position:absolute;right:10px;top:50%;transform:translateY(-50%);opacity:.55}
    .row-actions{display:flex;gap:8px;margin-top:12px}
    .btn-apply{background:#0d6efd}
    .btn-close{background:#0f1622}
    /* Calendario nativo type=date: tamaño compacto */
    input[type="date"]::-webkit-calendar-picker-indicator{opacity:0}
    .calendar-ico{position:absolute;right:12px;top:50%;transform:translateY(-50%);font-size:18px;opacity:.6}
    /* Zs por si hubiera popups de datepicker del SO */
    .modal{z-index:10000}
  </style>
</head>
<body>
  <header class="appbar">
    <img src="Logo.png" alt="" style="width:28px;height:28px;border-radius:6px;background:#fff;padding:2px">
    <div>
      <div class="title">Cuadrantes de turnos</div>
      <div class="subtitle">Sercotel Guadiana / Cumbria Spa&Hotel</div>
    </div>
    <div class="toolbar">
      <button class="btn" id="prevBtn">← Semana</button>
      <button class="btn" id="todayBtn">Hoy</button>
      <button class="btn" id="nextBtn">Semana →</button>
      <button class="btn" id="filtersBtn">Filtros</button>
    </div>
  </header>

  <main class="container">
    <div id="status" style="font:600 .95rem Montserrat,system-ui;color:#4b5563;opacity:.9">
      Listo. Abre <b>Filtros</b>, elige Hotel/Rango y pulsa <b>Aplicar</b>.
    </div>
    <div id="root"></div>
  </main>

  <!-- MODAL FILTROS -->
  <div class="modal-mask" id="filtersMask" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="filtrosTitle">
      <h3 id="filtrosTitle">Filtros</h3>
      <div class="grid">
        <div class="field">
          <label for="fHotel">Hotel</label>
          <div class="control">
            <select id="fHotel">
              <option value="">— Hotel —</option>
            </select>
            <span class="ico">▾</span>
          </div>
        </div>

        <div class="field">
          <label for="fEmpleado">Empleado <small>(opcional)</small></label>
          <div class="control">
            <select id="fEmpleado">
              <option value="">— Empleado —</option>
            </select>
            <span class="ico">▾</span>
          </div>
        </div>

        <div class="field">
          <label for="fDesde">Desde</label>
          <div class="control">
            <input id="fDesde" type="date" inputmode="numeric" placeholder="dd/mm/aaaa">
            <span class="calendar-ico">📅</span>
          </div>
        </div>

        <div class="field">
          <label for="fHasta">Hasta <small>(opcional)</small></label>
          <div class="control">
            <input id="fHasta" type="date" inputmode="numeric" placeholder="dd/mm/aaaa">
            <span class="calendar-ico">📅</span>
          </div>
        </div>
      </div>

      <div class="row-actions">
        <button class="btn btn-apply" id="applyBtn">Aplicar</button>
        <button class="btn btn-close" id="closeBtn">Cerrar</button>
      </div>
    </div>
  </div>

  <!-- 1) Datos (siempre sin defer para garantizar disponibilidad) -->
  <script src="data.js?v=APP"></script>

  <!-- 2) Plantilla + parche móvil (con defer) -->
  <script defer src="plantilla_adapter_semana.js?v=APP"></script>
  <script defer src="mobile.patch.js?v=APP"></script>

  <!-- 3) Registro opcional del SW -->
  <script> if('serviceWorker' in navigator){ navigator.serviceWorker.register('service-worker.js'); } </script>
</body>
</html>
