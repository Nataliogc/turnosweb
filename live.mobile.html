<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Turnos · Móvil</title>

  <!-- Tus estilos (no cambio nombres) -->
  <link rel="stylesheet" href="styles.css?v=APP">
  <link rel="stylesheet" href="styles.mobile.css?v=APP">

  <style>
    /* Modal compacto para móvil (sin librerías) */
    .modal-overlay{position:fixed;inset:0;background:#0008;backdrop-filter:saturate(120%) blur(2px);z-index:9998;display:none}
    .modal{position:fixed;left:0;right:0;bottom:0;background:#1f242b;color:#e8edf3;border-radius:18px 18px 0 0;
           box-shadow:0 -10px 24px rgba(0,0,0,.35);padding:14px;z-index:9999;display:none}
    .modal.show,.modal-overlay.show{display:block}
    .modal h2{font:600 18px/1.1 system-ui,Segoe UI,Roboto,Arial;margin:4px 2px 10px}
    .field{margin:10px 2px}
    .label{font:600 12px/1 system-ui,Segoe UI,Roboto;opacity:.9;margin:0 0 6px 2px}
    .input,.select{
      width:100%;height:40px;border-radius:10px;border:1px solid #3a424d;background:#0e1116;color:#e8edf3;
      padding:0 12px;outline:none
    }
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .modal-footer{display:flex;gap:10px;justify-content:flex-end;margin-top:10px}
    .btn{height:40px;border-radius:10px;border:0;padding:0 16px;font:600 14px/40px system-ui,Segoe UI,Roboto;cursor:pointer}
    .btn.primary{background:#0ea5e9;color:#00121a}
    .btn.ghost{background:#2a313b;color:#e8edf3}
    /* Barra */
    .appbar{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:#141a21;color:#e8edf3}
    .appbar .left{display:flex;align-items:center;gap:10px}
    .appbar img{width:28px;height:28px;border-radius:6px}
    .pills{display:flex;gap:8px}
    .pill{background:#26303b;color:#e8edf3;border-radius:10px;height:36px;padding:0 12px;border:0;font:600 14px/36px system-ui;cursor:pointer}
    .pill.solid{background:#0ea5e9;color:#00121a}
    main{padding:10px}
    .hint{color:#768395;margin:.5rem 0 0}
  </style>
</head>
<body>
  <header class="appbar">
    <div class="left">
      <img src="Logo.png" alt="">
      <div>
        <div style="font:700 16px/1 system-ui">Cuadrantes de turnos</div>
        <div style="font:12px/1.2 system-ui;opacity:.75">Sercotel Guadiana / Cumbria Spa&Hotel</div>
      </div>
    </div>
    <div class="pills">
      <button id="prevW"  class="pill">← Semana</button>
      <button id="todayW" class="pill">Hoy</button>
      <button id="nextW"  class="pill">Semana →</button>
      <button id="openFilters" class="pill solid">Filtros</button>
    </div>
  </header>

  <main id="root">
    <p id="hint" class="hint">Listo. Abre <strong>Filtros</strong>, elige Hotel/Rango y pulsa <strong>Aplicar</strong>.</p>
  </main>

  <!-- Modal de filtros -->
  <div id="overlay" class="modal-overlay" aria-hidden="true"></div>
  <section id="filters" class="modal" aria-modal="true" role="dialog" aria-labelledby="tFiltros">
    <h2 id="tFiltros">Filtros</h2>

    <div class="field">
      <div class="label">Hotel</div>
      <select id="fHotel" class="select"></select>
    </div>

    <div class="field">
      <div class="label">Empleado <span style="opacity:.6">(opcional)</span></div>
      <select id="fEmp" class="select">
        <option value="">— Empleado —</option>
      </select>
    </div>

    <div class="row">
      <div class="field">
        <div class="label">Desde</div>
        <!-- input nativo -> calendario del SO (pequeño y rápido) -->
        <input id="fFrom" class="input" type="date" inputmode="numeric">
      </div>
      <div class="field">
        <div class="label">Hasta <span style="opacity:.6">(opcional)</span></div>
        <input id="fTo" class="input" type="date" inputmode="numeric">
      </div>
    </div>

    <div class="modal-footer">
      <button id="apply" class="btn primary">Aplicar</button>
      <button id="close" class="btn ghost">Cerrar</button>
    </div>
  </section>

  <!-- ORDEN CRÍTICO: primero datos, luego motor, por último el parche -->
  <script src="data.js?v=APP"></script>
  <script src="plantilla_adapter_semana.js?v=APP"></script>
  <script src="mobile.patch.js?v=APP"></script>

  <script>
    if('serviceWorker' in navigator){
      navigator.serviceWorker.register('service-worker.js').catch(()=>{});
    }
  </script>
</body>
</html>
